<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSSIHMS Dashboard</title>
  
  <!-- Chart.js for Graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* ====== GLOBAL STYLES ====== */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f6f8fa;
      display: flex;
    }

    /* ====== SIDEBAR ====== */
    .sidebar {
      width: 240px;
      background-color: white;
      height: 100vh;
      padding: 20px;
      border-right: 1px solid #ddd;
      display: flex;
      flex-direction: column;
    }
    .sidebar.hidden {
    display: none;
  }

    .logo {
      text-align: center;
      margin-bottom: 20px;
    }

    .logo h2 {
      margin: 0;
      color: #1c2d5f;
    }

    .logo p {
      font-size: 12px;
      color: #777;
    }

    nav ul, .other-menu ul, .help-settings ul {
      list-style: none;
      padding: 0;
    }

    nav ul li, .other-menu ul li, .help-settings ul li {
      padding: 10px;
      color: #444;
      cursor: pointer;
      border-radius: 8px;
      margin-bottom: 5px;
    }

    nav ul li.active, nav ul li:hover,
    .other-menu ul li:hover, .help-settings ul li:hover {
      background-color: #e0f2f1;
      color: #009688;
    }

    /* ====== MAIN CONTENT ====== */
    .content {
      flex: 1;
      padding: 20px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .top-bar input {
      padding: 8px;
      width: 300px;
      border-radius: 20px;
      border: 1px solid #ccc;
    }

    /* ====== CARDS ====== */
    .cards {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .card {
      flex: 1;
      background-color: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .card h3 {
      margin-top: 0;
      font-size: 16px;
      color: #555;
    }

    .number {
      font-size: 24px;
      font-weight: bold;
      margin: 5px 0;
    }

    .change {
      font-size: 14px;
      color: green;
    }

    .sub {
      font-size: 12px;
      color: #777;
    }

    /* ====== STATS + CALENDAR ====== */
    .stats-calendar {
      display: flex;
      gap: 20px;
    }

    .stats, .calendar {
      background-color: white;
      border-radius: 12px;
      padding: 20px;
      flex: 1;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    /* Simple Calendar */
    .calendar table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }

    .calendar th, .calendar td {
      padding: 10px;
    }

    .calendar th {
      color: #009688;
    }

    .calendar td {
      border-radius: 6px;
      cursor: pointer;
    }

    .calendar td:hover {
      background-color: #e0f2f1;
    }
   
@media (max-width: 768px) {
    /*
    1. For mobile, the sidebar needs to be fixed and a toggle button is used.
    */
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        z-index: 1000;
        box-shadow: 2px 0 5px rgba(0,0,0,0.2);
        transform: translateX(-100%); /* Hides the sidebar by default on mobile */
    }

    /*
    2. This is the crucial part:
    When the "hidden" class is *removed* by your JavaScript, this rule will apply.
    It moves the sidebar back into view.
    */
    .sidebar:not(.hidden) {
        transform: translateX(0);
    }
    
    /* Optional: To show an overlay when the menu is open */
    body.sidebar-open .content {
        filter: brightness(50%); /* Dims the content */
    }

    /* 3. The content on mobile should be in a single column */
    .content {
        padding: 10px; /* Adjust padding for mobile */
    }

    /* 4. The cards should stack vertically */
    .cards,
    .stats-calendar {
        flex-direction: column;
        gap: 15px;
    }

    .card,
    .stats,
    .calendar {
        width: 100%;
        flex: none; /* Prevents flexbox from forcing them into a row */
    }
}
  </style>
</head>
<body>

<!-- ====== SIDEBAR ====== -->
<aside id="sidebar" class="sidebar">
  <div class="logo">
    <h2>SSIHMS</h2>
    <p>Dashboard</p>
  </div>

  <!-- Main Menu -->
  <nav>
    <ul>
      <li class="active">Overview</li>
      <li><a href="hospitals/">Revenue</a></li>
      <li>Department</a></li>
    </ul>
  </nav>

  <!-- Other Menu -->
  <div class="other-menu">
    <ul>
      <li>Doctors</li>
      <li>Employee</li>
      <li>Product & Stock</li>
      <!-- visit-stats -->
      <a href="{% url 'visit_stats' %}">Visit Stats</a>

<!-- hospital filter -->
<a href="{% url 'hospital_filter' %}">Hospital Filter</a>

<!-- hospital profile (needs hospital_code argument) -->
<a href="{% url 'hospital_profile' hospital_code='PSG' %}">Hospital Profile (PSG)</a>

<!-- hospital report -->
<a href="{% url 'hospital_report' %}">Hospital Report</a>

<!-- hospital overview -->
<a href="{% url 'hospital' %}">Hospital Overview</a>

    </ul>
  </div>

  <!-- Help & Settings -->
  <div class="help-settings">
    <ul>
      <li>
        <a href="/admin/">Admin</a>
        </li>
      <li>Report</li>
    </ul>
  </div>
</aside>

<!-- ====== MAIN CONTENT ====== -->
<main class="content">

  <!-- Top Bar -->
  <div class="top-bar">
    <input type="text" placeholder="Search anything here">
    <div class="user-info">
      <span> <a href="javascript:void(0)" onclick="toggleNav()">âœ– Close</a></span>
    </div>
  </div>

  <!-- Cards -->
  <section class="cards">
    <div class="card">
      <h3>Overall visitors</h3>
      <p class="number"> {{totals}} <span class="change">+15.2%</span></p>
      <p></p>
      <p class="sub">1,345 today</p>
    </div>

    <div class="card">
      <h3>Total new patients</h3>
      <p class="number">{{total_new}}<span class="change">+10.4%</span></p>
      <p>Increase in data by 500 inpatients in the last 7 days</p>
    </div>

    <div class="card">
      <h3>Total Surgeries</h3>
      <p class="number">{{surgeries}} <span class="change">+165</span></p>
      <p>Visitor data obtained for the last 7 days from 10.2% to 15.7%</p>
      <p class="sub">1,345 today</p>
    </div>
  </section>

  <!-- Stats & Calendar -->
  <div class="stats-calendar">
    <div class="stats">
      <canvas id="visitChart" width="600" height="300"></canvas>
    </div>

    <div class="calendar">
      <h3>Simple Calendar</h3>
      <table>
        <thead>
          <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
            <td>7</td>
          </tr>
          <tr>
            <td>8</td>
            <td>9</td>
            <td>10</td>
            <td>11</td>
            <td>12</td>
            <td>13</td>
            <td>14</td>
          </tr>
          <tr>
            <td>15</td>
            <td>16</td>
            <td>17</td>
            <td>18</td>
            <td>19</td>
            <td>20</td>
            <td>21</td>
          </tr>
          <tr>
            <td>22</td>
            <td>23</td>
            <td>24</td>
            <td>25</td>
            <td>26</td>
            <td>27</td>
            <td>28</td>
          </tr>
          <tr>
            <td>29</td>
            <td>30</td>
            <td>31</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>

<script>
   
const labels = {{ labels|default:"[]"|safe }};
const newvisits = {{ newvisits|default:"[]"|safe }};
const revisits = {{ revisits|default:"[]"|safe }};
const discharges = {{ discharges|default:"[]"|safe }};
const admissions = {{ admissions|default:"[]"|safe }};


    const ctx = document.getElementById('visitChart').getContext('2d');

    const visitChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                {
                    label: 'New Visits',
                    data: newvisits,
                    backgroundColor: 'rgba(54, 162, 235, 0.7)'
                },
                {
                    label: 'Revisits',
                    data: revisits,
                    backgroundColor: 'rgba(255, 99, 132, 0.7)'
                },
                {
                    label: 'Discharges',
                    data: discharges,
                    backgroundColor: 'rgba(25, 213, 122, 0.7)'
                },
                {
                    label: 'Admissions',
                    data: admissions,
                    backgroundColor: 'rgba(174, 20, 97, 0.7)'
                }
            ]
        },
        options: {
            responsive: false,
            scales: {
                x: { stacked: false },
                y: {
                    beginAtZero: true,
                    ticks: { stepSize: 100 }
                }
            }
        }
    });
    function toggleNav() {
    document.getElementById("sidebar").classList.toggle("hidden");
  }
 
</script>

 
  
</body>
</html>
